/*
**
** The C code is generated by ATS/Anairiats
** The compilation time is: 2016-2-4: 23h:27m
**
*/

/* include some .h files */
#ifndef _ATS_HEADER_NONE
#include "ats_config.h"
#include "ats_basics.h"
#include "ats_types.h"
#include "ats_exception.h"
#include "ats_memory.h"
#endif /* _ATS_HEADER_NONE */

/* include some .cats files */
#ifndef _ATS_PRELUDE_NONE
#include "prelude/CATS/basics.cats"
#include "prelude/CATS/bool.cats"
#include "prelude/CATS/char.cats"
#include "prelude/CATS/byte.cats"
#include "prelude/CATS/float.cats"
#include "prelude/CATS/integer.cats"
#include "prelude/CATS/integer_ptr.cats"
#include "prelude/CATS/integer_fixed.cats"
#include "prelude/CATS/sizetype.cats"
#include "prelude/CATS/pointer.cats"
#include "prelude/CATS/reference.cats"
#include "prelude/CATS/string.cats"
#include "prelude/CATS/lazy.cats"
#include "prelude/CATS/lazy_vt.cats"
#include "prelude/CATS/printf.cats"
#include "prelude/CATS/list.cats"
#include "prelude/CATS/option.cats"
#include "prelude/CATS/array.cats"
#include "prelude/CATS/matrix.cats"
#endif /* _ATS_PRELUDE_NONE */
/* prologues from statically loaded files */

#include "libc/CATS/fcntl.cats"

#include "libc/sys/CATS/types.cats"

#include "libc/CATS/time.cats"

#include "libc/sys/CATS/types.cats"

#include "libc/CATS/stdio.cats"

#include "libc/sys/CATS/types.cats"

#include "libc/CATS/fcntl.cats"

#include "libc/sys/CATS/types.cats"

#include "pats_location.cats"

#include "pats_location.cats"

#include "pats_lexbuf.cats"

#include "pats_location.cats"

#include "pats_location.cats"

#include "pats_location.cats"

#include "pats_lexbuf.cats"

#include "pats_location.cats"

#include "pats_location.cats"
/* external codes at top */
/* type definitions */
/* external typedefs */
/* external dynamic constructor declarations */
/* external dynamic constant declarations */
ATSextern_fun(ats_ptr_type, atspre_tostringf) (ats_ptr_type, ...) ;
ATSextern_fun(ats_ptr_type, ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_nil) () ;
ATSextern_fun(ats_ptr_type, ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst) (ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strsub) (ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_apptxt3) (ats_ptr_type, ats_ptr_type, ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_appstr3) (ats_ptr_type, ats_ptr_type, ats_ptr_type) ;
ATSextern_fun(ats_ptr_type, ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strptr) (ats_ptr_type) ;
ATSextern_fun(ats_void_type, ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str) (ats_ptr_type, ats_ptr_type) ;
ATSextern_fun(ats_void_type, ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__fprint_filsub) (ats_ptr_type, ats_ptr_type) ;
ATSextern_fun(ats_time_type, atslib_time_get) () ;
ATSextern_fun(ats_ptr_type, _2home_2hwxi_2Research_2ATS_2dPostiats_2utils_2libatsynmark_2SATS_2libatsynmark_2esats__string_pats2xhtmlize_bground) (ats_int_type, ats_ptr_type) ;

/* external dynamic terminating constant declarations */
#ifdef _ATS_PROOFCHECK
#endif /* _ATS_PROOFCHECK */

/* assuming abstract types */
/* sum constructor declarations */
/* exn constructor declarations */
/* global dynamic (non-functional) constant declarations */
/* internal function declarations */
static
ats_ptr_type xmltagging_0 (ats_ptr_type arg0, ats_ptr_type arg1) ;
static
ats_ptr_type comment_1 (ats_ptr_type arg0) ;
static
ats_ptr_type ignore_2 (ats_ptr_type arg0) ;
static
ats_ptr_type ignoretxt_3 (ats_ptr_type arg0) ;
static
ats_ptr_type pcenter_4 (ats_ptr_type arg0) ;
static
ats_ptr_type stacode_5 (ats_ptr_type arg0) ;
static
ats_ptr_type dyncode_6 (ats_ptr_type arg0) ;
static
ats_ptr_type timestamp_7 () ;
static
ats_ptr_type patscode_style_8 () ;
static
ats_ptr_type para_9 (ats_ptr_type arg0) ;
static
ats_ptr_type command_10 (ats_ptr_type arg0) ;
static
ats_ptr_type filename_11 (ats_ptr_type arg0) ;
static
ats_ptr_type pats2xhtml_sats_12 (ats_ptr_type arg0) ;
static
ats_ptr_type pats2xhtml_dats_13 (ats_ptr_type arg0) ;

/* partial value template declarations */
/* static temporary variable declarations */
ATSstatic (ats_ptr_type, statmp4) ;
ATSstatic (ats_ptr_type, statmp5) ;
ATSstatic (ats_ptr_type, statmp37) ;
// ATSstatic_void (statmp38) ;
ATSstatic (ats_ptr_type, statmp39) ;
// ATSstatic_void (statmp40) ;
ATSstatic (ats_ptr_type, statmp41) ;
// ATSstatic_void (statmp42) ;
ATSstatic (ats_ptr_type, statmp43) ;
// ATSstatic_void (statmp44) ;
ATSstatic (ats_ptr_type, statmp45) ;
// ATSstatic_void (statmp46) ;
ATSstatic (ats_ptr_type, statmp47) ;
// ATSstatic_void (statmp48) ;
ATSstatic (ats_ptr_type, statmp49) ;
// ATSstatic_void (statmp50) ;
ATSstatic (ats_ptr_type, statmp51) ;
// ATSstatic_void (statmp52) ;
ATSstatic (ats_ptr_type, statmp53) ;
// ATSstatic_void (statmp54) ;
ATSstatic (ats_ptr_type, statmp55) ;
// ATSstatic_void (statmp56) ;
ATSstatic (ats_ptr_type, statmp57) ;
// ATSstatic_void (statmp58) ;
ATSstatic (ats_ptr_type, statmp59) ;
// ATSstatic_void (statmp60) ;
ATSstatic (ats_ptr_type, statmp61) ;
// ATSstatic_void (statmp62) ;
ATSstatic (ats_ptr_type, statmp63) ;
// ATSstatic_void (statmp64) ;
ATSstatic (ats_ptr_type, statmp65) ;
// ATSstatic_void (statmp66) ;
ATSstatic (ats_ptr_type, statmp67) ;
// ATSstatic_void (statmp68) ;
ATSstatic (ats_ptr_type, statmp69) ;
// ATSstatic_void (statmp70) ;
ATSstatic (ats_ptr_type, statmp71) ;
// ATSstatic_void (statmp72) ;
ATSstatic (ats_ptr_type, statmp73) ;
// ATSstatic_void (statmp74) ;
ATSstatic (ats_ptr_type, statmp75) ;
// ATSstatic_void (statmp76) ;
ATSstatic (ats_ptr_type, statmp77) ;
// ATSstatic_void (statmp78) ;
ATSstatic (ats_ptr_type, statmp79) ;
// ATSstatic_void (statmp80) ;
ATSstatic (ats_ptr_type, statmp81) ;
// ATSstatic_void (statmp82) ;
ATSstatic (ats_ptr_type, statmp83) ;
// ATSstatic_void (statmp84) ;
ATSstatic (ats_ptr_type, statmp85) ;
// ATSstatic_void (statmp86) ;
ATSstatic (ats_ptr_type, statmp87) ;
// ATSstatic_void (statmp88) ;
ATSstatic (ats_ptr_type, statmp89) ;
// ATSstatic_void (statmp90) ;
ATSstatic (ats_ptr_type, statmp91) ;
// ATSstatic_void (statmp92) ;
ATSstatic (ats_ptr_type, statmp93) ;
// ATSstatic_void (statmp94) ;
ATSstatic (ats_ptr_type, statmp95) ;
// ATSstatic_void (statmp96) ;
ATSstatic (ats_ptr_type, statmp97) ;
// ATSstatic_void (statmp98) ;
ATSstatic (ats_ptr_type, statmp99) ;
// ATSstatic_void (statmp100) ;
ATSstatic (ats_ptr_type, statmp101) ;
// ATSstatic_void (statmp102) ;
ATSstatic (ats_ptr_type, statmp103) ;
// ATSstatic_void (statmp104) ;
ATSstatic (ats_ptr_type, statmp105) ;
// ATSstatic_void (statmp106) ;
ATSstatic (ats_ptr_type, statmp107) ;
// ATSstatic_void (statmp108) ;
ATSstatic (ats_ptr_type, statmp109) ;
// ATSstatic_void (statmp110) ;
ATSstatic (ats_ptr_type, statmp111) ;
// ATSstatic_void (statmp112) ;
ATSstatic (ats_ptr_type, statmp113) ;
// ATSstatic_void (statmp114) ;
ATSstatic (ats_ptr_type, statmp115) ;
// ATSstatic_void (statmp116) ;
ATSstatic (ats_ptr_type, statmp117) ;
// ATSstatic_void (statmp118) ;
ATSstatic (ats_ptr_type, statmp119) ;
// ATSstatic_void (statmp120) ;
ATSstatic (ats_ptr_type, statmp121) ;
// ATSstatic_void (statmp122) ;
ATSstatic (ats_ptr_type, statmp123) ;
// ATSstatic_void (statmp124) ;
ATSstatic (ats_ptr_type, statmp125) ;
// ATSstatic_void (statmp126) ;
ATSstatic (ats_ptr_type, statmp127) ;
// ATSstatic_void (statmp128) ;
ATSstatic (ats_ptr_type, statmp129) ;
// ATSstatic_void (statmp130) ;
ATSstatic (ats_ptr_type, statmp131) ;
// ATSstatic_void (statmp132) ;
ATSstatic (ats_ptr_type, statmp133) ;
// ATSstatic_void (statmp134) ;
ATSstatic (ats_ptr_type, statmp135) ;
// ATSstatic_void (statmp136) ;
ATSstatic (ats_ptr_type, statmp137) ;
// ATSstatic_void (statmp138) ;
ATSstatic (ats_ptr_type, statmp139) ;
// ATSstatic_void (statmp140) ;
ATSstatic (ats_ptr_type, statmp141) ;
// ATSstatic_void (statmp142) ;
ATSstatic (ats_ptr_type, statmp143) ;
// ATSstatic_void (statmp144) ;
ATSstatic (ats_ptr_type, statmp145) ;
// ATSstatic_void (statmp146) ;
ATSstatic (ats_ptr_type, statmp147) ;
// ATSstatic_void (statmp148) ;
ATSstatic (ats_ptr_type, statmp149) ;
// ATSstatic_void (statmp150) ;
ATSstatic (ats_ptr_type, statmp151) ;
// ATSstatic_void (statmp152) ;
ATSstatic (ats_ptr_type, statmp153) ;
// ATSstatic_void (statmp154) ;
ATSstatic (ats_ptr_type, statmp155) ;
// ATSstatic_void (statmp156) ;
ATSstatic (ats_ptr_type, statmp157) ;
// ATSstatic_void (statmp158) ;
ATSstatic (ats_ptr_type, statmp159) ;
// ATSstatic_void (statmp160) ;
ATSstatic (ats_ptr_type, statmp161) ;
// ATSstatic_void (statmp162) ;
ATSstatic (ats_ptr_type, statmp163) ;
// ATSstatic_void (statmp164) ;
ATSstatic (ats_ptr_type, statmp165) ;
// ATSstatic_void (statmp166) ;
ATSstatic (ats_ptr_type, statmp167) ;
// ATSstatic_void (statmp168) ;
ATSstatic (ats_ptr_type, statmp169) ;
// ATSstatic_void (statmp170) ;
ATSstatic (ats_ptr_type, statmp171) ;
// ATSstatic_void (statmp172) ;
ATSstatic (ats_ptr_type, statmp173) ;
// ATSstatic_void (statmp174) ;
ATSstatic (ats_ptr_type, statmp175) ;
// ATSstatic_void (statmp176) ;
ATSstatic (ats_ptr_type, statmp177) ;
// ATSstatic_void (statmp178) ;
ATSstatic (ats_ptr_type, statmp179) ;
// ATSstatic_void (statmp180) ;
ATSstatic (ats_ptr_type, statmp181) ;
// ATSstatic_void (statmp182) ;
ATSstatic (ats_ptr_type, statmp183) ;
// ATSstatic_void (statmp184) ;
ATSstatic (ats_ptr_type, statmp185) ;
// ATSstatic_void (statmp186) ;

/* external value variable declarations */

/* function implementations */

/*
// /home/hwxi/Research/ATS-Anairiats/utils/atsdoc/HATS/xhtmlatxt.hats: 1956(line=66, offs=5) -- 2149(line=73, offs=4)
*/
ATSstaticdec()
ats_ptr_type
xmltagging_0 (ats_ptr_type arg0, ats_ptr_type arg1) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp0) ;
ATSlocal (ats_ptr_type, tmp1) ;
ATSlocal (ats_ptr_type, tmp2) ;
ATSlocal (ats_ptr_type, tmp3) ;

__ats_lab_xmltagging_0:
tmp1 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_appstr3 (ATSstrcst("<"), arg0, ATSstrcst(">")) ;
tmp2 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_appstr3 (ATSstrcst("</"), arg0, ATSstrcst(">")) ;
tmp3 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strsub (arg1) ;
tmp0 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_apptxt3 (tmp1, tmp3, tmp2) ;
return (tmp0) ;
} /* end of [xmltagging_0] */

/*
// /home/hwxi/Research/ATS-Anairiats/utils/atsdoc/HATS/xhtmlatxt.hats: 2649(line=99, offs=5) -- 2735(line=100, offs=58)
*/
ATSstaticdec()
ats_ptr_type
comment_1 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp6) ;
ATSlocal (ats_ptr_type, tmp7) ;

__ats_lab_comment_1:
tmp7 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strsub (arg0) ;
tmp6 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_apptxt3 (statmp4, tmp7, statmp5) ;
return (tmp6) ;
} /* end of [comment_1] */

/*
// /home/hwxi/Research/ATS-Anairiats/utils/atsdoc/HATS/xhtmlatxt.hats: 2805(line=107, offs=5) -- 2845(line=107, offs=45)
*/
ATSstaticdec()
ats_ptr_type
ignore_2 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp8) ;

__ats_lab_ignore_2:
tmp8 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_nil () ;
return (tmp8) ;
} /* end of [ignore_2] */

/*
// /home/hwxi/Research/ATS-Anairiats/utils/atsdoc/HATS/xhtmlatxt.hats: 2850(line=108, offs=5) -- 2892(line=108, offs=47)
*/
ATSstaticdec()
ats_ptr_type
ignoretxt_3 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp9) ;

__ats_lab_ignoretxt_3:
tmp9 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_nil () ;
return (tmp9) ;
} /* end of [ignoretxt_3] */

/*
// /home/hwxi/Research/ATS-Anairiats/utils/atsdoc/HATS/xhtmlatxt.hats: 3183(line=130, offs=1) -- 3359(line=136, offs=4)
*/
ATSstaticdec()
ats_ptr_type
pcenter_4 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp10) ;
ATSlocal (ats_ptr_type, tmp11) ;
ATSlocal (ats_ptr_type, tmp12) ;
ATSlocal (ats_ptr_type, tmp13) ;

__ats_lab_pcenter_4:
tmp11 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("<p style=\"text-align: center;\">")) ;
tmp12 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("</p>")) ;
tmp13 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strsub (arg0) ;
tmp10 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_apptxt3 (tmp11, tmp13, tmp12) ;
return (tmp10) ;
} /* end of [pcenter_4] */

/*
// /home/hwxi/Research/ATS-Anairiats/utils/atsdoc/HATS/xhtmlatxt.hats: 3406(line=141, offs=1) -- 3584(line=147, offs=4)
*/
ATSstaticdec()
ats_ptr_type
stacode_5 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp14) ;
ATSlocal (ats_ptr_type, tmp15) ;
ATSlocal (ats_ptr_type, tmp16) ;
ATSlocal (ats_ptr_type, tmp17) ;

__ats_lab_stacode_5:
tmp15 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("<span style=\"color: #0000F0;\">")) ;
tmp16 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("</span>")) ;
tmp17 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strsub (arg0) ;
tmp14 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_apptxt3 (tmp15, tmp17, tmp16) ;
return (tmp14) ;
} /* end of [stacode_5] */

/*
// /home/hwxi/Research/ATS-Anairiats/utils/atsdoc/HATS/xhtmlatxt.hats: 3610(line=150, offs=1) -- 3788(line=156, offs=4)
*/
ATSstaticdec()
ats_ptr_type
dyncode_6 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp18) ;
ATSlocal (ats_ptr_type, tmp19) ;
ATSlocal (ats_ptr_type, tmp20) ;
ATSlocal (ats_ptr_type, tmp21) ;

__ats_lab_dyncode_6:
tmp19 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("<span style=\"color: #F00000;\">")) ;
tmp20 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("</span>")) ;
tmp21 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strsub (arg0) ;
tmp18 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_apptxt3 (tmp19, tmp21, tmp20) ;
return (tmp18) ;
} /* end of [dyncode_6] */

/*
// /home/hwxi/Research/ATS-Anairiats/utils/atsdoc/HATS/xhtmlatxt.hats: 3835(line=160, offs=5) -- 4066(line=169, offs=4)
*/
ATSstaticdec()
ats_ptr_type
timestamp_7 () {
/* local vardec */
ATSlocal (ats_ptr_type, tmp22) ;
ATSlocal (ats_time_type, tmp23) ;
ATSlocal (ats_ptr_type, tmp24) ;
ATSlocal (ats_ptr_type, tmp25) ;
ATSlocal (ats_ptr_type, tmp26) ;

__ats_lab_timestamp_7:
/* ats_time_type tmp23 ; */
tmp23 = atslib_time_get () ;
tmp24 = atslib_ctime ((&tmp23)) ;
tmp25 = ats_selsin_mac(tmp24, atslab_1) ;
tmp26 = atspre_tostringf (ATSstrcst("%s"), ats_castfn_mac(ats_ptr_type, tmp25)) ;
tmp22 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ats_castfn_mac(ats_ptr_type, tmp26)) ;
return (tmp22) ;
} /* end of [timestamp_7] */

/*
// /home/hwxi/Research/ATS-Postiats/doc/EXAMPLE/EFFECTIVATS/ATEXT/atextfun.hats: 349(line=25, offs=1) -- 1339(line=45, offs=3)
*/
ATSstaticdec()
ats_ptr_type
patscode_style_8 () {
/* local vardec */
ATSlocal (ats_ptr_type, tmp27) ;

__ats_lab_patscode_style_8:
tmp27 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("<style type=\"text/css\">\n  .patsyntax {color:#808080;background-color:#E0E0E0;}\n  .patsyntax span.keyword {color:#000000;font-weight:bold;}\n  .patsyntax span.comment {color:#787878;font-style:italic;}\n  .patsyntax span.extcode {color:#A52A2A;}\n  .patsyntax span.neuexp  {color:#800080;}\n  .patsyntax span.staexp  {color:#0000F0;}\n  .patsyntax span.prfexp  {color:#603030;}\n  .patsyntax span.dynexp  {color:#F00000;}\n  .patsyntax span.stalab  {color:#0000F0;font-style:italic}\n  .patsyntax span.dynlab  {color:#F00000;font-style:italic}\n  .patsyntax span.dynstr  {color:#008000;font-style:normal}\n  .patsyntax span.stacstdec  {text-decoration:none;}\n  .patsyntax span.stacstuse  {color:#0000CF;text-decoration:underline;}\n  .patsyntax span.dyncstdec  {text-decoration:none;}\n  .patsyntax span.dyncstuse  {color:#B80000;text-decoration:underline;}\n  .patsyntax span.dyncst_implement  {color:#B80000;text-decoration:underline;}\n</style>\n")) ;
return (tmp27) ;
} /* end of [patscode_style_8] */

/*
// /home/hwxi/Research/ATS-Postiats/doc/EXAMPLE/EFFECTIVATS/ATEXT/atextfun.hats: 1398(line=50, offs=1) -- 1447(line=53, offs=31)
*/
ATSstaticdec()
ats_ptr_type
para_9 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp28) ;

__ats_lab_para_9:
tmp28 = xmltagging_0 (ATSstrcst("p"), arg0) ;
return (tmp28) ;
} /* end of [para_9] */

/*
// /home/hwxi/Research/ATS-Postiats/doc/EXAMPLE/EFFECTIVATS/ATEXT/atextfun.hats: 1478(line=58, offs=1) -- 1531(line=61, offs=32)
*/
ATSstaticdec()
ats_ptr_type
command_10 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp29) ;

__ats_lab_command_10:
tmp29 = xmltagging_0 (ATSstrcst("em"), arg0) ;
return (tmp29) ;
} /* end of [command_10] */

/*
// /home/hwxi/Research/ATS-Postiats/doc/EXAMPLE/EFFECTIVATS/ATEXT/atextfun.hats: 1562(line=66, offs=1) -- 1616(line=69, offs=32)
*/
ATSstaticdec()
ats_ptr_type
filename_11 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp30) ;

__ats_lab_filename_11:
tmp30 = xmltagging_0 (ATSstrcst("tt"), arg0) ;
return (tmp30) ;
} /* end of [filename_11] */

/*
// /home/hwxi/Research/ATS-Postiats/doc/EXAMPLE/EFFECTIVATS/ATEXT/atextfun.hats: 1733(line=81, offs=1) -- 2008(line=90, offs=4)
*/
ATSstaticdec()
ats_ptr_type
pats2xhtml_sats_12 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp31) ;
ATSlocal (ats_ptr_type, tmp32) ;
ATSlocal (ats_bool_type, tmp33) ;

__ats_lab_pats2xhtml_sats_12:
tmp32 = _2home_2hwxi_2Research_2ATS_2dPostiats_2utils_2libatsynmark_2SATS_2libatsynmark_2esats__string_pats2xhtmlize_bground (0, arg0) ;
tmp33 = atspre_ptr_is_null (tmp32) ;
if (tmp33) {
tmp31 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_nil () ;
} else {
tmp31 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strptr (tmp32) ;
} /* end of [if] */
return (tmp31) ;
} /* end of [pats2xhtml_sats_12] */

/*
// /home/hwxi/Research/ATS-Postiats/doc/EXAMPLE/EFFECTIVATS/ATEXT/atextfun.hats: 2042(line=93, offs=1) -- 2317(line=102, offs=4)
*/
ATSstaticdec()
ats_ptr_type
pats2xhtml_dats_13 (ats_ptr_type arg0) {
/* local vardec */
ATSlocal (ats_ptr_type, tmp34) ;
ATSlocal (ats_ptr_type, tmp35) ;
ATSlocal (ats_bool_type, tmp36) ;

__ats_lab_pats2xhtml_dats_13:
tmp35 = _2home_2hwxi_2Research_2ATS_2dPostiats_2utils_2libatsynmark_2SATS_2libatsynmark_2esats__string_pats2xhtmlize_bground (1, arg0) ;
tmp36 = atspre_ptr_is_null (tmp35) ;
if (tmp36) {
tmp34 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_nil () ;
} else {
tmp34 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strptr (tmp35) ;
} /* end of [if] */
return (tmp34) ;
} /* end of [pats2xhtml_dats_13] */

/*
// /home/hwxi/Research/ATS-Postiats/doc/EXAMPLE/EFFECTIVATS/HanoiTowers/main_atxt.dats: 20234(line=859, offs=16) -- 20282(line=859, offs=64)
*/
ATSglobaldec()
ats_void_type
mainats () {
/* local vardec */
// ATSlocal_void (tmp187) ;

__ats_lab_mainats:
/* tmp187 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__fprint_filsub (stdout, ATSstrcst("main_atxt.txt")) ;
return /* (tmp187) */ ;
} /* end of [mainats] */

/* static load function */

extern ats_void_type ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__staload (void) ;
// extern ats_void_type ATS_2d0_2e2_2e12_2prelude_2SATS_2unsafe_2esats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2libc_2SATS_2time_2esats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2libc_2SATS_2stdio_2esats__staload (void) ;
extern ats_void_type ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__staload (void) ;
extern ats_void_type _2home_2hwxi_2Research_2ATS_2dPostiats_2utils_2libatsynmark_2SATS_2libatsynmark_2esats__staload (void) ;

ats_void_type
_2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__staload () {
static int _2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__staload_flag = 0 ;
if (_2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__staload_flag) return ;
_2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__staload_flag = 1 ;

ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__staload () ;
// ATS_2d0_2e2_2e12_2prelude_2SATS_2unsafe_2esats__staload () ;
ATS_2d0_2e2_2e12_2libc_2SATS_2time_2esats__staload () ;
ATS_2d0_2e2_2e12_2libc_2SATS_2stdio_2esats__staload () ;
ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__staload () ;
_2home_2hwxi_2Research_2ATS_2dPostiats_2utils_2libatsynmark_2SATS_2libatsynmark_2esats__staload () ;

return ;
} /* staload function */

/* dynamic load function */

ats_int_type _2home_2hwxi_2Research_2ATS_2dPostiats_2utils_2libatsynmark_2dynloadall_2edats__dynload_flag = 0 ;
extern ats_void_type _2home_2hwxi_2Research_2ATS_2dPostiats_2utils_2libatsynmark_2dynloadall_2edats__dynload (void) ;
ats_int_type ATS_2d0_2e2_2e12_2libatsdoc_2dynloadall_2edats__dynload_flag = 0 ;
extern ats_void_type ATS_2d0_2e2_2e12_2libatsdoc_2dynloadall_2edats__dynload (void) ;

// dynload flag declaration
// extern ats_int_type _2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__dynload_flag ;

ats_void_type
_2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__dynload () {
// _2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__dynload_flag = 1 ;
_2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__staload () ;

#ifdef _ATS_PROOFCHECK
#endif /* _ATS_PROOFCHECK */

/* marking static variables for GC */
ATS_GC_MARKROOT(&statmp4, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp5, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp37, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp39, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp41, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp43, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp45, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp47, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp49, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp51, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp53, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp55, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp57, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp59, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp61, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp63, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp65, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp67, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp69, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp71, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp73, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp75, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp77, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp79, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp81, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp83, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp85, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp87, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp89, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp91, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp93, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp95, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp97, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp99, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp101, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp103, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp105, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp107, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp109, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp111, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp113, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp115, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp117, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp119, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp121, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp123, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp125, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp127, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp129, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp131, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp133, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp135, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp137, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp139, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp141, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp143, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp145, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp147, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp149, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp151, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp153, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp155, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp157, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp159, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp161, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp163, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp165, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp167, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp169, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp171, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp173, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp175, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp177, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp179, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp181, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp183, sizeof(ats_ptr_type)) ;
ATS_GC_MARKROOT(&statmp185, sizeof(ats_ptr_type)) ;

/* marking external values for GC */

/* code for dynamic loading */
ATS_2d0_2e2_2e12_2libatsdoc_2dynloadall_2edats__dynload () ;
_2home_2hwxi_2Research_2ATS_2dPostiats_2utils_2libatsynmark_2dynloadall_2edats__dynload () ;
statmp4 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("<!--")) ;
statmp5 = ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__atext_strcst (ATSstrcst("-->")) ;
statmp37 = patscode_style_8 () ;
/* statmp38 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok1"), statmp37) ;
statmp39 = para_9 (ATSstrcst("Types are an extremely powerful notion in programming\nas what is behind types is logic itself. However, making\neffective use of types in programming is a very difficult\ntask for many programmers (ranging from novices to experts).\nIn this article, I will present several solutions to a simple problem,\ngradually illustrating certain typical uses of dependent types\nand linear types in programming.\n")) ;
/* statmp40 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok2"), statmp39) ;
statmp41 = para_9 (ATSstrcst("\nGiven three poles: Pole 1, Pole 2 and Pole 3, there are 64 disks of\ndistinct sizes stacked on Pole 1 such that no disk is stacked on one\nof a lesser size, and both Pole 2 and Pole 3 are empty.  The player is\nasked to the task of moving all the disks from Pole 1 to Pole 2 (while\nusing Pole 3 as a spare): Only one disk can be moved from one pole to\nanother one each time and no disk is ever allowed to be stacked on\nanother one of less size during the entire process of moving.\n")) ;
/* statmp42 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok3"), statmp41) ;
statmp43 = para_9 (ATSstrcst("It will soon be clear that 2<sup>64</sup>-1 moves are needed in order to\naccomplish the aforementioned task.\n")) ;
/* statmp44 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok4"), statmp43) ;
statmp45 = stacode_5 (ATSstrcst("pole")) ;
/* statmp46 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok6"), statmp45) ;
statmp47 = pats2xhtml_dats_13 (ATSstrcst("datatype\npole = Pole of\n(\n  string(*name*), ref(list0(int))(*disks*)\n) (* end of [Pole] *)\n")) ;
/* statmp48 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok7"), statmp47) ;
statmp49 = para_9 (ATSstrcst("\nFirst, let us see a straightforward solution of imperative style to\nthe Hanoi Towers puzzle. A datatype #__tok6$ is declared as\nfollows for representing poles:\n\n<pre\nclass=\"patsyntax\">\n#__tok7$</pre>\n\nNote that the disks stacked on a pole is represented as a list of\nintegers. As a disk may be moved from one pole to another one, a\nreference to a list of integers is contained in the representation of\na pole so that the content of the reference can be updated to reflect\nthe actual disks stacked on the pole.\n")) ;
/* statmp50 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok5"), statmp49) ;
statmp51 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp52 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok9"), statmp51) ;
statmp53 = pats2xhtml_dats_13 (ATSstrcst("//\nextern\nfun\nmove_1(P1: pole, P2: pole): void\n//\nimplement\nmove_1(P1, P2) = let\n//\nval Pole(n1, r1) = P1\nval-cons0(x, xs) = !r1\nval ((*void*)) = !r1 := xs\n//\nval Pole(n2, r2) = P2\nval ((*void*)) = !r2 := cons0(x, !r2)\n//\nin\n  println! (\"Move [\", x, \"] from [\", n1, \"] to [\", n2, \"]\")\nend // end of [move_1]\n//\n")) ;
/* statmp54 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok10"), statmp53) ;
statmp55 = dyncode_6 (ATSstrcst("move_n")) ;
/* statmp56 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok11"), statmp55) ;
statmp57 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp58 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok12"), statmp57) ;
statmp59 = pats2xhtml_dats_13 (ATSstrcst("//\nextern\nfun\nmove_n\n(\n  n: int\n, P1: pole, P2: pole, P3: pole\n) : void\n//\nimplement\nmove_n\n(\n  n, P1, P2, P3\n) = (\n//\nif n > 0 then\n{\n  val n1 = n - 1\n  val () = move_n(n1, P1, P3, P2)\n  val () = move_1(P1, P2)\n  val () = move_n(n1, P3, P2, P1)\n}\n//\n) (* end of [move_n] *)\n//\n")) ;
/* statmp60 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok13"), statmp59) ;
statmp61 = para_9 (ATSstrcst("\nIn the following code, the function\n#__tok9$ is called to move a single disk from\none pole to another one:\n\n<pre\nclass=\"patsyntax\">\n#__tok10$</pre>\n\nThe function #__tok11$ for moving multiple disks from one\npole to another one (while using the third one as a spare) can be\nimplemented based on #__tok12$ as follows:\n\n<pre\nclass=\"patsyntax\">\n#__tok13$</pre>\n\n")) ;
/* statmp62 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok8"), statmp61) ;
statmp63 = dyncode_6 (ATSstrcst("move_n")) ;
/* statmp64 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok15"), statmp63) ;
statmp65 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp66 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok16"), statmp65) ;
statmp67 = para_9 (ATSstrcst("\nIt is easy to see that #__tok15$, when applied\na natural number N and 3 distinct poles, makes 2<sup>N</sup>-1 calls\nto #__tok16$ before it returns.\n\n")) ;
/* statmp68 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok14"), statmp67) ;
statmp69 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp70 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok18"), statmp69) ;
statmp71 = pats2xhtml_dats_13 (ATSstrcst("val-cons0(x, xs) = !r1\n")) ;
/* statmp72 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok19"), statmp71) ;
statmp73 = stacode_5 (ATSstrcst("pole")) ;
/* statmp74 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok20"), statmp73) ;
statmp75 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp76 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok21"), statmp75) ;
statmp77 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp78 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok22"), statmp77) ;
statmp79 = para_9 (ATSstrcst("\nA serious issue with the above solution (of imperative style) is that\npattern matching involved in the following val-declaration (appearing\ninside the body of #__tok18$) is not guaranteed (solely based\non typechecking) to succeed:\n\n<pre\nclass=\"patsyntax\">\n#__tok19$</pre>\n\nWhile the use of a reference in the type #__tok20$ makes it\nstraightforward to implement #__tok21$, reasoning about the\nimplementation of #__tok22$ is greatly complicated (largely\ndue to the involvement of a global state).\n\n")) ;
/* statmp80 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok17"), statmp79) ;
statmp81 = comment_1 (ATSstrcst("para")) ;
/* statmp82 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok23"), statmp81) ;
statmp83 = para_9 (ATSstrcst("\nLet us see as follows a solution of functional style to the Hanoi\nTowers puzzle that rules out (solely based on typechecking) the\npossiblity of pattern matching failure at run-time.\n\n")) ;
/* statmp84 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok24"), statmp83) ;
statmp85 = comment_1 (ATSstrcst("para")) ;
/* statmp86 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok25"), statmp85) ;
statmp87 = stacode_5 (ATSstrcst("pole(N)")) ;
/* statmp88 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok27"), statmp87) ;
statmp89 = pats2xhtml_dats_13 (ATSstrcst("//\nabstype pole(n:int) = ptr\n//\n")) ;
/* statmp90 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok28"), statmp89) ;
statmp91 = para_9 (ATSstrcst("\nGiven an integer N, the type #__tok27$ is for a pole on\nwhich N disks are stacked:\n\n<pre\nclass=\"patsyntax\">\n#__tok28$</pre>\n\n")) ;
/* statmp92 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok26"), statmp91) ;
statmp93 = comment_1 (ATSstrcst("para")) ;
/* statmp94 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok29"), statmp93) ;
statmp95 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp96 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok31"), statmp95) ;
statmp97 = dyncode_6 (ATSstrcst("move_n")) ;
/* statmp98 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok32"), statmp97) ;
statmp99 = pats2xhtml_dats_13 (ATSstrcst("//\nextern\nfun\nmove_1\n{p1,p2:nat|p1 > 0}\n(\n  P1: pole(p1), P2: pole(p2)\n) : (pole(p1-1), pole(p2+1))\n//\nextern\nfun\nmove_n{n:nat}\n{p1,p2,p3:nat|p1 >= n}\n(\n  n: int(n)\n, P1: pole(p1), P2: pole(p2), P3: pole(p3)\n) : (pole(p1-n), pole(p2+n), pole(p3))\n//\n")) ;
/* statmp100 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok33"), statmp99) ;
statmp101 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp102 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok34"), statmp101) ;
statmp103 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp104 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok35"), statmp103) ;
statmp105 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp106 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok36"), statmp105) ;
statmp107 = dyncode_6 (ATSstrcst("move_n")) ;
/* statmp108 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok37"), statmp107) ;
statmp109 = para_9 (ATSstrcst("\nThe functions #__tok31$ and #__tok32$ are given the\nfollowing types to reflect their functional nature:\n\n<pre\nclass=\"patsyntax\">\n#__tok33$</pre>\n\nNote that the type assigned to #__tok34$ indicates that\n#__tok35$ is of functional style: Given two poles holding\nP1 and P2 disks such that P1 is positive, #__tok36$ returns\ntwo (new) poles holding P1-1 and P2+1 disks. Similarly, #__tok37$\nis also of functional style.\n\n")) ;
/* statmp110 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok30"), statmp109) ;
statmp111 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp112 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok39"), statmp111) ;
statmp113 = dyncode_6 (ATSstrcst("move_n")) ;
/* statmp114 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok40"), statmp113) ;
statmp115 = pats2xhtml_dats_13 (ATSstrcst("local\n\ndatatype\npole_(n:int) =\nPole of\n(\n  string, list(int, n)\n) (* end of [pole_] *)\n\nassume pole(n:int) = pole_(n)\n\nin (* in-of-local *)\n\nimplement\nmove_1(P1, P2) = let\n//\n  val Pole(n1, r1) = P1\n  val+list_cons(x, xs) = r1 // no failure!\n  val Pole(n2, r2) = P2\n//\n  val () =\n  println!\n  (\n    \"Move [\", x, \"] from [\", n1, \"] to [\", n2, \"]\"\n  ) (* end of [val] *)\n//\nin\n  (Pole(n1, xs), Pole(n2, list_cons(x, r2)))\nend // end of [move_1]\n\nend // end of [local]\n\n(* ****** ****** *)\n\nimplement\nmove_n(n, P1, P2, P3) = (\n//\nif\nn > 0\nthen\n(\n  P1, P2, P3\n) where\n{\n  val n1 = n - 1\n  val (P1, P3, P2) = move_n(n1, P1, P3, P2)\n  val (P1, P2)     = move_1(P1, P2)\n  val (P3, P2, P1) = move_n(n1, P3, P2, P1)\n}\nelse (P1, P2, P3)\n//\n) (* end of [move_n] *)\n")) ;
/* statmp116 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok41"), statmp115) ;
statmp117 = dyncode_6 (ATSstrcst("val+")) ;
/* statmp118 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok42"), statmp117) ;
statmp119 = para_9 (ATSstrcst("\nThe functions #__tok39$ and #__tok40$ of functional\nstyle are implemented as follows:\n\n<pre\nclass=\"patsyntax\">\n#__tok41$</pre>\n\nNote that the keyword #__tok42$ indicates the need to verify\n(based on typechecking) the exhaustiveness of pattern matching\ninvolved in the val-declaration it introduces.\n\n")) ;
/* statmp120 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok38"), statmp119) ;
statmp121 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp122 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok44"), statmp121) ;
statmp123 = dyncode_6 (ATSstrcst("move_n")) ;
/* statmp124 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok45"), statmp123) ;
statmp125 = para_9 (ATSstrcst("\nWith no involvement of a global state, reasoning about the functional\nversion of #__tok44$ and #__tok45$ is greatly\nsimplified. And this is often claimed as a strong selling point for\nfunctional programming.\n\n")) ;
/* statmp126 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok43"), statmp125) ;
statmp127 = comment_1 (ATSstrcst("para")) ;
/* statmp128 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok46"), statmp127) ;
statmp129 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp130 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok48"), statmp129) ;
statmp131 = para_9 (ATSstrcst("\nWhile functional programming can greatly simplify reasoning, it is\noften wasteful in terms of memory usage. For instance, each call to\nthe above functional version of #__tok48$ builds two new\npoles; the two poles passed as arguments are of no more use after the\ncall returns. Fortunately, one can turn to what I refer to as linear\nfunctional programming in ATS to reduce or even eliminate this kind of\nwaste.\n\n")) ;
/* statmp132 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok47"), statmp131) ;
statmp133 = comment_1 (ATSstrcst("para")) ;
/* statmp134 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok49"), statmp133) ;
statmp135 = stacode_5 (ATSstrcst("pole")) ;
/* statmp136 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok51"), statmp135) ;
statmp137 = pats2xhtml_dats_13 (ATSstrcst("//\nabsvtype pole(n:int) = ptr\n//\n")) ;
/* statmp138 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok52"), statmp137) ;
statmp139 = stacode_5 (ATSstrcst("move_1")) ;
/* statmp140 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok53"), statmp139) ;
statmp141 = stacode_5 (ATSstrcst("move_n")) ;
/* statmp142 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok54"), statmp141) ;
statmp143 = pats2xhtml_dats_13 (ATSstrcst("extern\nfun\nmove_1\n{p1,p2:nat|p1 > 0}\n(\n  P1: !pole(p1) >> pole(p1-1)\n, P2: !pole(p2) >> pole(p2+1)\n) : void // end-of-function\n//\nextern\nfun\nmove_n{n:nat}\n{p1,p2,p3:nat|p1 >= n}\n(\n  n: int(n)\n, P1: !pole(p1) >> pole(p1-n), P2: !pole(p2) >> pole(p2+n), P3: !pole(p3)\n) : void // end-of-function\n//\n")) ;
/* statmp144 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok55"), statmp143) ;
statmp145 = stacode_5 (ATSstrcst("move_1")) ;
/* statmp146 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok56"), statmp145) ;
statmp147 = dyncode_6 (ATSstrcst("P1")) ;
/* statmp148 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok57"), statmp147) ;
statmp149 = dyncode_6 (ATSstrcst("P2")) ;
/* statmp150 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok58"), statmp149) ;
statmp151 = dyncode_6 (ATSstrcst("P1")) ;
/* statmp152 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok59"), statmp151) ;
statmp153 = dyncode_6 (ATSstrcst("P2")) ;
/* statmp154 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok60"), statmp153) ;
statmp155 = dyncode_6 (ATSstrcst("move_n")) ;
/* statmp156 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok61"), statmp155) ;
statmp157 = para_9 (ATSstrcst("\nLet us first declare #__tok51$ is decared as a linear type:\n\n<pre\nclass=\"patsyntax\">\n#__tok52$</pre>\n\nUnlike a non-linear type, a value of a linear type can be modified.\nThe types for the linear functional version of #__tok53$ and\n#__tok54$ are declared as follows:\n\n<pre\nclass=\"patsyntax\">\n#__tok55$</pre>\n\nBased on the type of #__tok56$, it is clear that calling the\nfunction on two given poles #__tok57$ and #__tok58$ changes\nthe types of these two poles to reflect that fact that #__tok59$\ncontains one fewer disk after the call and #__tok60$ one more\ndisk. The type assigned to #__tok61$ can be interpreted similarly.\n")) ;
/* statmp158 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok50"), statmp157) ;
statmp159 = comment_1 (ATSstrcst("para")) ;
/* statmp160 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok62"), statmp159) ;
statmp161 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp162 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok64"), statmp161) ;
statmp163 = dyncode_6 (ATSstrcst("move_n")) ;
/* statmp164 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok65"), statmp163) ;
statmp165 = pats2xhtml_dats_13 (ATSstrcst("local\n//\ndatavtype\npole_(n:int) =\nPole(n) of\n(\n  string, list_vt(int, n)\n) (* end of [pole_] *)\n//\nassume pole(n:int) = pole_(n)\n//\nin (* in-of-local *)\n\nimplement\nmove_1(P1, P2) = let\n//\nval+@Pole(n1, rxs) = P1\nval n1 = n1\nval+~list_vt_cons(x, xs) = rxs\nval ((*void*)) = rxs := xs\nprval ((*folded*)) = fold@(P1)\n//\nval+@Pole(n2, rxs) = P2\nval n2 = n2\nval ((*void*)) = rxs := list_vt_cons(x, rxs)\nprval ((*folded*)) = fold@(P2)\n//\nin\n  println! (\"Move [\", x, \"] from [\", n1, \"] to [\", n2, \"]\")\nend // end of [move_1]\n\nend // end of [local]\n\n(* ****** ****** *)\n\nimplement\nmove_n(n, P1, P2, P3) = (\n//\nif\nn > 0\nthen () where\n{\n//\nval n1 = n - 1\nval () = move_n(n1, P1, P3, P2)\nval () = move_1(P1, P2)\nval () = move_n(n1, P3, P2, P1)\n//\n} (* end of [then] *)\nelse () // end of [else]\n//\n) (* end of [move_n] *)\n")) ;
/* statmp166 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok66"), statmp165) ;
statmp167 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp168 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok67"), statmp167) ;
statmp169 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp170 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok68"), statmp169) ;
statmp171 = dyncode_6 (ATSstrcst("move_1")) ;
/* statmp172 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok69"), statmp171) ;
statmp173 = para_9 (ATSstrcst("\nThe functions #__tok64$ and #__tok65$ of linear functional\nstyle are implemented as follows:\n\n<pre\nclass=\"patsyntax\">\n#__tok66$</pre>\n\nNote that a pole now contains a linear list.\nIn contrast to the (non-linear) functional version of #__tok67$,\nthe linear functional version of #__tok68$ returns two new poles\nthat are built by modifying the two poles passed as arguments: There is no\nwaste in this case as the original poles are no longer in existence after\nthe call to #__tok69$ is returned.\n\n")) ;
/* statmp174 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok63"), statmp173) ;
statmp175 = comment_1 (ATSstrcst("para")) ;
/* statmp176 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok70"), statmp175) ;
statmp177 = filename_11 (ATSstrcst("HanoiTowers-1.dats")) ;
/* statmp178 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok72"), statmp177) ;
statmp179 = filename_11 (ATSstrcst("HanoiTowers-2.dats")) ;
/* statmp180 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok73"), statmp179) ;
statmp181 = filename_11 (ATSstrcst("HanoiTowers-3.dats")) ;
/* statmp182 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok74"), statmp181) ;
statmp183 = para_9 (ATSstrcst("\nFor the entirety of the three presented solutions to the Hanoi Towers puzzle,\nplease visit the following files:\n\n<ul>\n<li>#__tok72$\n<li>#__tok73$\n<li>#__tok74$\n</ul>\n\nThere is also a Makefile available for testing.\nBy comparing the solution of linear functional style with the one of\nimperative style, I hope that one can readily see the progress being made:\nthe former is not only simpler and cleaner to reason about than the latter\nbut also more efficient both time-wise and memory-wise.\n\n")) ;
/* statmp184 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok71"), statmp183) ;
statmp185 = comment_1 (ATSstrcst("para")) ;
/* statmp186 = */ ATS_2d0_2e2_2e12_2libatsdoc_2SATS_2libatsdoc_atext_2esats__theAtextMap_insert_str (ATSstrcst("__tok75"), statmp185) ;
return ;
} /* end of [dynload function] */

int main (int argc, char *argv[]) {
ATS_GC_INIT() ;
mainats_prelude() ;
_2home_2hwxi_2Research_2ATS_2dPostiats_2doc_2EXAMPLE_2EFFECTIVATS_2HanoiTowers_2main_atxt_2edats__dynload() ;
mainats((ats_int_type)argc, (ats_ptr_type)argv) ;
return (0) ;
} /* end of main */

/* external codes at mid */
/* external codes at bot */

/* ****** ****** */

/* end of [main_atxt_dats.c] */
