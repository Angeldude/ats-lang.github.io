<pre class="patsyntax">
<span class="comment">(***********************************************************************)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(*                         Applied Type System                         *)</span>
<span class="comment">(*                                                                     *)</span>
<span class="comment">(***********************************************************************)</span>

<span class="comment">(*
** ATS/Postiats - Unleashing the Potential of Types!
** Copyright (C) 2010-2013 Hongwei Xi, ATS Trustful Software, Inc.
** All rights reserved
**
** ATS is free software;  you can  redistribute it and/or modify it under
** the terms of  the GNU GENERAL PUBLIC LICENSE (GPL) as published by the
** Free Software Foundation; either version 3, or (at  your  option)  any
** later version.
**
** ATS is distributed in the hope that it will be useful, but WITHOUT ANY
** WARRANTY; without  even  the  implied  warranty  of MERCHANTABILITY or
** FITNESS FOR A PARTICULAR PURPOSE.  See the  GNU General Public License
** for more details.
**
** You  should  have  received  a  copy of the GNU General Public License
** along  with  ATS;  see the  file COPYING.  If not, please write to the
** Free Software Foundation,  51 Franklin Street, Fifth Floor, Boston, MA
** 02110-1301, USA.
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">(*
** Source:
** $PATSHOME/prelude/SATS/CODEGEN/strptr.atxt
** Time of generation: Sat Jun 27 21:39:02 2015
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">(* Author: Hongwei Xi *)</span>
<span class="comment">(* Authoremail: hwxi AT cs DOT bu DOT edu *)</span>
<span class="comment">(* Start time: February, 2012 *)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="comment">(*
** HX-2012:
** a Strptr0 is either the null-pointer or Strptr1
** a Strptr1 is a null-terminated arrayptr of characters
*)</span>

<span class="comment">(* ****** ****** *)</span>

<span class="staexp"><span class="keyword">abst@ype</span>
strbuf_t0ype <span class="keyword">(</span>m<span class="keyword">:</span>int<span class="keyword">,</span> n<span class="keyword">:</span>int<span class="keyword">)</span></span> <span class="comment">// HX: [m] byte size</span>

<span class="comment">(* ****** ****** *)</span>

<span class="keyword">stadef</span>
<span class="staexp">strbuf <span class="keyword">=</span> <span class="staexp">strbuf_t0ype</span></span>
<span class="keyword">viewdef</span>
<span class="staexp">strbuf_v <span class="keyword">(</span><span class="staexp">l<span class="keyword">:</span>addr</span><span class="keyword">,</span> <span class="staexp">m<span class="keyword">:</span>int</span><span class="keyword">,</span> <span class="staexp">n<span class="keyword">:</span>int</span><span class="keyword">)</span> <span class="keyword">=</span> <span class="staexp">strbuf</span> <span class="keyword">(</span><span class="staexp">m</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span> <span class="staexp"><span class="keyword">@</span></span> <span class="staexp">l</span></span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="prfexp"><span class="keyword">praxi</span>
strbuf2bytes
  <span class="staexp"><span class="keyword">{</span>m<span class="keyword">,</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>buf<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">strbuf</span> <span class="keyword">(</span><span class="staexp">m</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span> <span class="staexp">&gt;&gt;</span> <span class="staexp">b0ytes</span> <span class="keyword">(</span><span class="staexp">m</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span>
<span class="comment">//</span>
<span class="prfexp"><span class="keyword">praxi</span>
strbuf2bytes_v
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>m<span class="keyword">,</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>pf<span class="keyword">:</span> <span class="staexp">strbuf_v</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">m</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">b0ytes_v</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">m</span><span class="keyword">)</span></span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>

<span class="prfexp"><span class="keyword">praxi</span>
lemma_strptr_param
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strptr</span> <span class="staexp">l</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>l&gt;=null<span class="keyword">]</span></span> <span class="staexp">void</span></span>
<span class="comment">// end of [lemma_strptr_param]</span>

<span class="prfexp"><span class="keyword">praxi</span>
lemma_strnptr_param
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span>
<span class="keyword">(</span>
  x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span><span class="keyword">(</span>l<span class="keyword">&gt;</span>null&amp;&amp;n&gt;=0<span class="keyword">)</span> || <span class="keyword">(</span>l==null&amp;&amp;n==<span class="keyword">(</span><span class="keyword">~</span>1<span class="keyword">)</span><span class="keyword">)</span><span class="keyword">]</span></span> <span class="staexp">void</span></span>
<span class="comment">// end of [lemma_strnptr_param]</span>

<span class="comment">(* ****** ****** *)</span>

<span class="prfexp"><span class="keyword">praxi</span>
lemma_strbuf_param
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>m<span class="keyword">,</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">strbuf</span> <span class="keyword">(</span><span class="staexp">m</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>m<span class="keyword">&gt;</span>n<span class="keyword">]</span></span> <span class="staexp">void</span></span>
<span class="comment">// end of [lemma_strbuf_param]</span>

<span class="prfexp"><span class="keyword">praxi</span>
lemma_strbuf_v_param
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>m<span class="keyword">,</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>pf<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strbuf_v</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">m</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp"><span class="keyword">[</span>l<span class="keyword">&gt;</span>null<span class="keyword">;</span>m<span class="keyword">&gt;</span>n<span class="keyword">]</span></span> <span class="staexp">void</span></span>
<span class="comment">// end of [lemma_strbuf_v_param]</span>

<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">castfn</span>
strptr2ptr
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strptr</span> <span class="staexp">l</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">ptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">)</span></span>
<span class="dynexp"><span class="keyword">castfn</span>
strnptr2ptr
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">ptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">)</span></span>
<span class="comment">// end of [strnptr2ptr]</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">castfn</span>
strnptr2strptr
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">strptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">)</span></span>
<span class="comment">// end of [strnptr2strptr]</span>

<span class="dynexp"><span class="keyword">castfn</span>
strptr2strnptr
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">strptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp"><span class="keyword">[</span>n<span class="keyword">:</span>int<span class="keyword">]</span></span> <span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span></span>
<span class="comment">// end of [strptr2strnptr]</span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">castfn</span>
strptr2stropt
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span>
<span class="keyword">(</span>
  x<span class="keyword">:</span> <span class="staexp">strptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">)</span>
<span class="keyword">)</span> <span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp"><span class="keyword">[</span>n<span class="keyword">:</span>int<span class="keyword">|</span><span class="keyword">(</span>l==null&amp;&amp;n <span class="keyword">&lt;</span> 0<span class="keyword">)</span>||<span class="keyword">(</span>l<span class="keyword">&gt;</span>null&amp;&amp;n&gt;=0<span class="keyword">)</span><span class="keyword">]</span></span> <span class="staexp">stropt</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>
<span class="dynexp"><span class="keyword">castfn</span>
strptr2stropt0 <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">Stropt0</span></span>
<span class="dynexp"><span class="keyword">castfn</span>
stropt2stropt1 <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">Strptr1</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">Stropt1</span></span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">castfn</span>
strnptr2stropt
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">stropt</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">castfn</span>
strptr2string <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">Strptr1</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">String</span></span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">castfn</span>
strnptr2string
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">string</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span> strptr_null <span class="keyword">(</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">strptr</span> <span class="keyword">(</span><span class="staexp">null</span><span class="keyword">)</span> <span class="keyword">=</span> "mac#%"</span>

<span class="comment">(* ****** ****** *)</span>

<span class="prfexp"><span class="keyword">praxi</span>
strptr_free_null
   <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr <span class="keyword">|</span> l &lt;= null<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">strptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span>
<span class="comment">// end of [strptr_free_null]</span>

<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strptr_is_null
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strptr</span> <span class="staexp">l</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">(</span><span class="staexp">l</span><span class="staexp">==</span><span class="staexp">null</span><span class="keyword">)</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strptr_isnot_null
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strptr</span> <span class="staexp">l</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">(</span><span class="staexp">l</span> <span class="staexp"><span class="keyword">&gt;</span></span> <span class="staexp">null</span><span class="keyword">)</span></span>

<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span> strptr_is_empty <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr1</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span> strptr_isnot_empty <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr1</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span></span>

<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strnptr_is_null
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">(</span><span class="staexp">l</span><span class="staexp">==</span><span class="staexp">null</span><span class="keyword">)</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strnptr_isnot_null
  <span class="staexp"><span class="keyword">{</span>l<span class="keyword">:</span>addr<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">l</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">(</span><span class="staexp">l</span> <span class="staexp"><span class="keyword">&gt;</span></span> <span class="staexp">null</span><span class="keyword">)</span></span>

<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span> lt_strptr_strptr
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">&lt;</span> <span class="keyword">with</span> lt_strptr_strptr</span>
<span class="dynexp"><span class="keyword">fun</span> lte_strptr_strptr
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">overload</span> &lt;= <span class="keyword">with</span> lte_strptr_strptr</span>

<span class="dynexp"><span class="keyword">fun</span> gt_strptr_strptr
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">&gt;</span> <span class="keyword">with</span> gt_strptr_strptr</span>
<span class="dynexp"><span class="keyword">fun</span> gte_strptr_strptr
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">overload</span> &gt;= <span class="keyword">with</span> gte_strptr_strptr</span>

<span class="dynexp"><span class="keyword">fun</span> eq_strptr_strptr
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_strptr_strptr</span>
<span class="dynexp"><span class="keyword">fun</span> neq_strptr_strptr
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">overload</span> != <span class="keyword">with</span> neq_strptr_strptr</span>
<span class="dynexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_strptr_strptr</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span> compare_strptr_strptr
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">Sgn</span> <span class="keyword">=</span> "mac#%"</span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span> eq_strptr_string
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr1</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">overload</span> <span class="keyword">=</span> <span class="keyword">with</span> eq_strptr_string</span>

<span class="dynexp"><span class="keyword">fun</span> neq_strptr_string
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr1</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">bool</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">overload</span> != <span class="keyword">with</span> neq_strptr_string</span>
<span class="dynexp"><span class="keyword">overload</span> &lt;&gt; <span class="keyword">with</span> neq_strptr_string</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span> compare_strptr_string
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr1</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp">string</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">Sgn</span> <span class="keyword">=</span> "mac#%"</span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span> strptr_free <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">void</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">fun</span> strnptr_free <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp">Strnptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">void</span> <span class="keyword">=</span> "mac#%"</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span>
fprint_strptr
<span class="keyword">(</span>
  out<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span>
<span class="keyword">)</span> <span class="keyword">:</span> <span class="staexp">void</span> <span class="keyword">=</span> "mac#%"</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span> print_strptr <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">fun</span> prerr_strptr <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span> <span class="keyword">=</span> "mac#%"</span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span> print_strbuf
  <span class="staexp"><span class="keyword">{</span>m<span class="keyword">,</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>buf<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">strbuf</span><span class="keyword">(</span><span class="staexp">m</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span> <span class="keyword">=</span> "mac#%"</span>
<span class="dynexp"><span class="keyword">fun</span> prerr_strbuf
  <span class="staexp"><span class="keyword">{</span>m<span class="keyword">,</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>buf<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">strbuf</span><span class="keyword">(</span><span class="staexp">m</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span> <span class="keyword">=</span> "mac#%"</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span>
fprint_strbuf<span class="staexp"><span class="keyword">{</span>m<span class="keyword">,</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>out<span class="keyword">:</span> <span class="staexp">FILEref</span><span class="keyword">,</span> buf<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">strbuf</span> <span class="keyword">(</span><span class="staexp">m</span><span class="keyword">,</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span> <span class="keyword">=</span> "mac#%"</span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strnptr_get_at_size <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>str<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp">sizeLt</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">charNZ</span></span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>tk<span class="keyword">:</span>tk<span class="keyword">}</span></span>
strnptr_get_at_gint
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat <span class="keyword">|</span> i <span class="keyword">&lt;</span> n<span class="keyword">}</span></span>
  <span class="keyword">(</span>s<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp">g1int</span> <span class="keyword">(</span><span class="staexp">tk</span><span class="keyword">,</span> <span class="staexp">i</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">charNZ</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>tk<span class="keyword">:</span>tk<span class="keyword">}</span></span>
strnptr_get_at_guint
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat <span class="keyword">|</span> i <span class="keyword">&lt;</span> n<span class="keyword">}</span></span>
  <span class="keyword">(</span>s<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp">g1uint</span> <span class="keyword">(</span><span class="staexp">tk</span><span class="keyword">,</span> <span class="staexp">i</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">charNZ</span></span>
<span class="comment">//</span>
<span class="neuexp"><span class="keyword">symintr</span> strnptr_get_at</span>
<span class="dynexp"><span class="keyword">overload</span> strnptr_get_at <span class="keyword">with</span> strnptr_get_at_size <span class="keyword">of</span> 1</span>
<span class="dynexp"><span class="keyword">overload</span> strnptr_get_at <span class="keyword">with</span> strnptr_get_at_gint <span class="keyword">of</span> 0</span>
<span class="dynexp"><span class="keyword">overload</span> strnptr_get_at <span class="keyword">with</span> strnptr_get_at_guint <span class="keyword">of</span> 0</span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strnptr_set_at_size <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span>
  <span class="keyword">(</span>str<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp">sizeLt</span> <span class="staexp">n</span><span class="keyword">,</span> c<span class="keyword">:</span> <span class="staexp">charNZ</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>tk<span class="keyword">:</span>tk<span class="keyword">}</span></span>
strnptr_set_at_gint
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat <span class="keyword">|</span> i <span class="keyword">&lt;</span> n<span class="keyword">}</span></span>
  <span class="keyword">(</span>s<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp">g1int</span> <span class="keyword">(</span><span class="staexp">tk</span><span class="keyword">,</span> <span class="staexp">i</span><span class="keyword">)</span><span class="keyword">,</span> c<span class="keyword">:</span> <span class="staexp">charNZ</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>tk<span class="keyword">:</span>tk<span class="keyword">}</span></span>
strnptr_set_at_guint
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span><span class="staexp"><span class="keyword">{</span>i<span class="keyword">:</span>nat <span class="keyword">|</span> i <span class="keyword">&lt;</span> n<span class="keyword">}</span></span>
  <span class="keyword">(</span>s<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">,</span> i<span class="keyword">:</span> <span class="staexp">g1uint</span> <span class="keyword">(</span><span class="staexp">tk</span><span class="keyword">,</span> <span class="staexp">i</span><span class="keyword">)</span><span class="keyword">,</span> c<span class="keyword">:</span> <span class="staexp">charNZ</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span>
<span class="comment">//</span>
<span class="neuexp"><span class="keyword">symintr</span> strnptr_set_at</span>
<span class="dynexp"><span class="keyword">overload</span> strnptr_set_at <span class="keyword">with</span> strnptr_set_at_size <span class="keyword">of</span> 1</span>
<span class="dynexp"><span class="keyword">overload</span> strnptr_set_at <span class="keyword">with</span> strnptr_set_at_gint <span class="keyword">of</span> 0</span>
<span class="dynexp"><span class="keyword">overload</span> strnptr_set_at <span class="keyword">with</span> strnptr_set_at_guint <span class="keyword">of</span> 0</span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strptr_length <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">ssize_t</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strnptr_length <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">&gt;</span> <span class="staexp">ssize_t</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
<span class="keyword">}</span></span> strptr0_copy <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">Strptr0</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
<span class="keyword">}</span></span> strptr1_copy <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr1</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">Strptr1</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
<span class="keyword">}</span></span> strnptr_copy
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>int<span class="keyword">}</span></span> <span class="keyword">(</span>x<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
<span class="keyword">}</span></span> strptr_append <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">Strptr0</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
<span class="keyword">}</span></span> strnptr_append <span class="staexp"><span class="keyword">{</span>n1<span class="keyword">,</span>n2<span class="keyword">:</span>nat<span class="keyword">}</span></span>
  <span class="keyword">(</span>x1<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="staexp">n1</span><span class="keyword">,</span> x2<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="staexp">n2</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">strnptr</span> <span class="keyword">(</span><span class="staexp">n1</span><span class="staexp">+</span><span class="staexp">n2</span><span class="keyword">)</span></span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
<span class="keyword">}</span></span> strptrlst_free <span class="keyword">(</span>xs<span class="keyword">:</span> <span class="staexp">List_vt</span> <span class="keyword">(</span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">void</span></span>

<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>
<span class="keyword">}</span></span> strptrlst_concat <span class="keyword">(</span>xs<span class="keyword">:</span> <span class="staexp">List_vt</span> <span class="keyword">(</span><span class="staexp">Strptr0</span><span class="keyword">)</span><span class="keyword">)</span><span class="keyword">:&lt;</span><span class="keyword">!</span><span class="staexp">wrt</span><span class="keyword">&gt;</span> <span class="staexp">Strptr0</span></span>

<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>env<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
strnptr_foreach$cont <span class="keyword">(</span>c<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">charNZ</span><span class="keyword">,</span> env<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">env</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">bool</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>env<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
strnptr_foreach$fwork <span class="keyword">(</span>c<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">charNZ</span> <span class="staexp">&gt;&gt;</span> <span class="staexp">_</span><span class="keyword">,</span> env<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">env</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strnptr_foreach <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>str<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">sizeLte</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>env<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
strnptr_foreach_env
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>str<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="staexp">n</span><span class="keyword">,</span> env<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="keyword">(</span><span class="staexp">env</span><span class="keyword">)</span> <span class="staexp">&gt;&gt;</span> <span class="staexp">_</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">sizeLte</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>
<span class="comment">// end of [strnptr_foreach_env]</span>

<span class="comment">(* ****** ****** *)</span>

<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>env<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
strnptr_rforeach$cont <span class="keyword">(</span>c<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">charNZ</span><span class="keyword">,</span> env<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">env</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">bool</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>env<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
strnptr_rforeach$fwork <span class="keyword">(</span>c<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">charNZ</span> <span class="staexp">&gt;&gt;</span> <span class="staexp">_</span><span class="keyword">,</span> env<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="staexp">env</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">void</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span><span class="keyword">}</span></span>
strnptr_rforeach <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>str<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="staexp">n</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">sizeLte</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>
<span class="dynexp"><span class="keyword">fun</span><span class="staexp"><span class="keyword">{</span>env<span class="keyword">:</span>vt0p<span class="keyword">}</span></span>
strnptr_rforeach_env
  <span class="staexp"><span class="keyword">{</span>n<span class="keyword">:</span>nat<span class="keyword">}</span></span> <span class="keyword">(</span>str<span class="keyword">:</span> <span class="staexp"><span class="keyword">!</span></span><span class="staexp">strnptr</span> <span class="staexp">n</span><span class="keyword">,</span> env<span class="keyword">:</span> <span class="staexp">&amp;</span><span class="keyword">(</span><span class="staexp">env</span><span class="keyword">)</span> <span class="staexp">&gt;&gt;</span> <span class="staexp">_</span><span class="keyword">)</span><span class="keyword">:</span> <span class="staexp">sizeLte</span><span class="keyword">(</span><span class="staexp">n</span><span class="keyword">)</span></span>
<span class="comment">// end of [strnptr_rforeach_env]</span>

<span class="comment">(* ****** ****** *)</span>
<span class="comment">//</span>
<span class="comment">// overloading for certain symbols</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span>
<span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> strnptr_get_at_size <span class="keyword">of</span> 1</span>
<span class="dynexp"><span class="keyword">overload</span>
<span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> strnptr_get_at_gint <span class="keyword">of</span> 0</span>
<span class="dynexp"><span class="keyword">overload</span>
<span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> strnptr_get_at_guint <span class="keyword">of</span> 0</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span>
<span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> strnptr_set_at_size <span class="keyword">of</span> 1</span>
<span class="dynexp"><span class="keyword">overload</span>
<span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> strnptr_set_at_gint <span class="keyword">of</span> 0</span>
<span class="dynexp"><span class="keyword">overload</span>
<span class="keyword">[</span><span class="keyword">]</span> <span class="keyword">with</span> strnptr_set_at_guint <span class="keyword">of</span> 0</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span> iseqz <span class="keyword">with</span> strptr_is_null</span>
<span class="dynexp"><span class="keyword">overload</span> iseqz <span class="keyword">with</span> strnptr_is_null</span>
<span class="dynexp"><span class="keyword">overload</span> isneqz <span class="keyword">with</span> strptr_isnot_null</span>
<span class="dynexp"><span class="keyword">overload</span> isneqz <span class="keyword">with</span> strnptr_isnot_null</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span>
compare <span class="keyword">with</span> compare_strptr_strptr</span>
<span class="dynexp"><span class="keyword">overload</span>
compare <span class="keyword">with</span> compare_strptr_string</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span> length <span class="keyword">with</span> strptr_length</span>
<span class="dynexp"><span class="keyword">overload</span> length <span class="keyword">with</span> strnptr_length</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span> copy <span class="keyword">with</span> strptr0_copy <span class="keyword">of</span> 0</span>
<span class="dynexp"><span class="keyword">overload</span> copy <span class="keyword">with</span> strptr1_copy <span class="keyword">of</span> 10</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span> free <span class="keyword">with</span> strptr_free</span>
<span class="dynexp"><span class="keyword">overload</span> free <span class="keyword">with</span> strnptr_free</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span> print <span class="keyword">with</span> print_strptr</span>
<span class="dynexp"><span class="keyword">overload</span> prerr <span class="keyword">with</span> prerr_strptr</span>
<span class="dynexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_strptr</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span> print <span class="keyword">with</span> print_strbuf</span>
<span class="dynexp"><span class="keyword">overload</span> prerr <span class="keyword">with</span> prerr_strbuf</span>
<span class="dynexp"><span class="keyword">overload</span> fprint <span class="keyword">with</span> fprint_strbuf</span>
<span class="comment">//</span>
<span class="dynexp"><span class="keyword">overload</span> ptrcast <span class="keyword">with</span> strptr2ptr</span>
<span class="dynexp"><span class="keyword">overload</span> ptrcast <span class="keyword">with</span> strnptr2ptr</span>
<span class="comment">//</span>
<span class="comment">(* ****** ****** *)</span>

<span class="comment">(* end of [strptr.sats] *)</span>
</pre>
